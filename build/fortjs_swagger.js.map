{"version":3,"sources":["webpack://fortjs-swagger/webpack/bootstrap","webpack://fortjs-swagger/./src/decorators/body.ts","webpack://fortjs-swagger/./src/decorators/ignore_property.ts","webpack://fortjs-swagger/./src/decorators/index.ts","webpack://fortjs-swagger/./src/decorators/query.ts","webpack://fortjs-swagger/./src/decorators/response.ts","webpack://fortjs-swagger/./src/decorators/swagger_model.ts","webpack://fortjs-swagger/./src/enums/data_type.ts","webpack://fortjs-swagger/./src/enums/index.ts","webpack://fortjs-swagger/./src/handlers/swagger_handler.ts","webpack://fortjs-swagger/./src/helpers/extract_model.ts","webpack://fortjs-swagger/./src/helpers/get_data_type.ts","webpack://fortjs-swagger/./src/helpers/get_param_schema.ts","webpack://fortjs-swagger/./src/index.ts","webpack://fortjs-swagger/./src/models/index.ts","webpack://fortjs-swagger/./src/models/swagger.ts","webpack://fortjs-swagger/./src/models/swagger_formatter.ts","webpack://fortjs-swagger/external \"fortjs\""],"names":[],"mappings":"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","file":"fortjs_swagger.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { SwaggerHandler } from \"../handlers/swagger_handler\";\r\n\r\n\r\nexport const Body = (value: any, description?: string): MethodDecorator => {\r\n    return (target: any, methodName: string, descriptor: PropertyDescriptor) => {\r\n        const className = (target.constructor.name as string);\r\n        SwaggerHandler.saveBody(className, methodName, {\r\n            value: value,\r\n            variableName: \"body\",\r\n            description: description\r\n        })\r\n    };\r\n}","import { SwaggerHandler } from \"../handlers/swagger_handler\";\r\n\r\nexport const IgnoreProperty = (target: any, propertyName: string, descriptor: PropertyDescriptor) => {\r\n    const className = (target.constructor.name as string);\r\n    SwaggerHandler.addIgnoreProperty(className, propertyName);\r\n};","export * from './body';\r\nexport * from './ignore_property';\r\nexport * from './query';\r\nexport * from './response';\r\nexport * from './swagger_model';","import { SwaggerHandler } from \"../handlers/swagger_handler\";\r\nimport { DATA_TYPE } from \"../enums/data_type\";\r\n\r\nexport const Query = (variableName: string, value: any, description?: string): MethodDecorator => {\r\n    return (target: any, methodName: string, descriptor: PropertyDescriptor) => {\r\n        const className = (target.constructor.name as string);\r\n        SwaggerHandler.saveQuery(className, methodName, {\r\n            value: value,\r\n            variableName: variableName,\r\n            description: description\r\n        })\r\n    };\r\n}","import { HTTP_STATUS_CODE, MIME_TYPE } from \"fortjs\";\r\nimport { SwaggerHandler } from \"../handlers/swagger_handler\";\r\nimport { getDataType } from \"../helpers/get_data_type\";\r\nimport { extractAndSaveModel } from \"../helpers/extract_model\";\r\n// import { SwaggerResponse, SwaggerModelResponse, SwaggerCustomTypeResponse } from \"../types/swagger_response\";\r\nimport { DATA_TYPE } from \"../enums\";\r\n\r\nexport const Response = (statusCode: HTTP_STATUS_CODE, value: any, contentType?: MIME_TYPE): MethodDecorator => {\r\n    return (target: any, methodName: string, descriptor: PropertyDescriptor) => {\r\n        const className = (target.constructor.name as string);\r\n        const modelName = extractAndSaveModel(value);\r\n        const saveResponse = (mimeType) => {\r\n            SwaggerHandler.saveResponse(className, methodName, {\r\n                contentType: mimeType,\r\n                statusCode: statusCode,\r\n                value: value\r\n            })\r\n        };\r\n        if (modelName.length > 0) {\r\n            [MIME_TYPE.Json, MIME_TYPE.Xml].forEach(type => {\r\n                saveResponse(type);\r\n            });\r\n        }\r\n        else {\r\n            if (contentType == null) {\r\n                contentType = MIME_TYPE.Text;\r\n            }\r\n            saveResponse(contentType);\r\n        }\r\n        // const modelName = extractAndSaveModel(value);\r\n        // const responseValue = getResponseValue(value);\r\n        // const saveResponse = (mimeType) => {\r\n        //     SwaggerHandler.saveResponse(className, methodName, mimeType, {\r\n        //         statusCode: statusCode,\r\n        //         value: responseValue\r\n        //     })\r\n        // };\r\n        // //responseValue.description = contentType;\r\n        // if (modelName.length > 0) {\r\n        //     [MIME_TYPE.Json, MIME_TYPE.Xml].forEach(type => {\r\n        //         saveResponse(type);\r\n        //     });\r\n        // }\r\n        // else {\r\n        //     if (contentType == null) {\r\n        //         contentType = MIME_TYPE.Text;\r\n        //     }\r\n        //     saveResponse(contentType);\r\n        // }\r\n    };\r\n}\r\n\r\n// const getResponseValue = (value) => {\r\n//     const modelName = extractAndSaveModel(value);\r\n//     const dataType = getDataType(value);\r\n//     if (modelName.length > 0) { // value is model\r\n//         const modelRefString = `#/models/${modelName}`;\r\n//         const swaggerModelSchema: SwaggerModelResponse = {\r\n//             $ref: modelRefString\r\n//         };\r\n//         if (dataType === DATA_TYPE.Function) {\r\n//             return {\r\n//                 schema: swaggerModelSchema\r\n//             } as SwaggerResponse;\r\n//         }\r\n//         else {\r\n//             return {\r\n//                 schema: {\r\n//                     type: DATA_TYPE.Array,\r\n//                     items: swaggerModelSchema\r\n//                 } as SwaggerCustomTypeResponse\r\n//             } as SwaggerResponse;\r\n//         }\r\n//     }\r\n//     else {\r\n//         return {\r\n//             schema: {\r\n//                 type: dataType,\r\n//                 example: value\r\n//             } as SwaggerCustomTypeResponse\r\n//         } as SwaggerResponse;\r\n//     }\r\n// }","import { SwaggerHandler } from \"../handlers/swagger_handler\";\r\n\r\n// export const responseModel = (): ClassDecorator => {\r\n//     return (target: any) => {\r\n//         const className = target.name;\r\n//         SwaggerHandler.saveModel({\r\n//             classInstance: new target(),\r\n//             className: className,\r\n//             ignoredProperty: []\r\n//         })\r\n//     }\r\n// }\r\n\r\nexport const SwaggerModel = (target: any) => {\r\n    const className = target.name;\r\n    SwaggerHandler.saveModel({\r\n        classInstance: new target(),\r\n        className: className,\r\n        ignoredProperty: []\r\n    })\r\n}","export enum DATA_TYPE {\r\n    String = \"string\",\r\n    Number = \"number\",\r\n    Array = \"array\",\r\n    Object = \"object\",\r\n    Function = \"function\"\r\n}","export * from './data_type';","import { SwaggerInfo } from \"../types/swagger_route_info\";\r\nimport { ResponseInfo } from \"../types/response_info\";\r\nimport { QueryInfo } from \"../types/query_info\";\r\nimport { WorkerInfo } from \"../types/worker_info\";\r\nimport { BodyInfo } from \"../types/body_info\";\r\nimport { SwaggerModelInfo } from \"../types/swagger_model_info\";\r\nimport { MIME_TYPE } from \"fortjs\";\r\n\r\nconst swaggerRoutes: SwaggerInfo[] = [];\r\nconst swaggerModels: SwaggerModelInfo[] = [];\r\n\r\nconst getNewWorker = (methodName: string) => {\r\n    return {\r\n        body: {} as BodyInfo,\r\n        file: {},\r\n        methodName: methodName,\r\n        queries: [],\r\n        responses: [],\r\n        params: []\r\n    } as WorkerInfo\r\n}\r\nexport class SwaggerHandler {\r\n    // static saveResponse(className: string, methodName: string, contentType: MIME_TYPE, response: ResponseInfo) {\r\n    //     const value = swaggerRoutes.find(qry => qry.className === className);\r\n    //     const worker = getNewWorker(methodName);\r\n    //     worker.response[response.statusCode] = {\r\n    //         [contentType]: response.value\r\n    //     }\r\n    //     if (value == null) {\r\n    //         swaggerRoutes.push({\r\n    //             className: className,\r\n    //             workers: [worker]\r\n    //         })\r\n    //     }\r\n    //     else {\r\n    //         const savedWorker = value.workers.find(qry => qry.methodName === methodName);\r\n    //         if (savedWorker != null) { // add another response for that worker\r\n    //             if (savedWorker.response[response.statusCode] == null) {\r\n    //                 savedWorker.response[response.statusCode] = {};\r\n    //             }\r\n    //             savedWorker.response[response.statusCode][contentType] = response.value;\r\n    //         }\r\n    //         else { //add the worker\r\n    //             value.workers.push(worker);\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    static saveResponse(className: string, methodName: string, response: ResponseInfo) {\r\n        const value = swaggerRoutes.find(qry => qry.className === className);\r\n        const worker = getNewWorker(methodName);\r\n        worker.responses.push(response);\r\n        if (value == null) {\r\n            swaggerRoutes.push({\r\n                className: className,\r\n                workers: [worker]\r\n            })\r\n        }\r\n        else {\r\n            const savedWorker = value.workers.find(qry => qry.methodName === methodName);\r\n            if (savedWorker != null) { // add query for that worker\r\n                savedWorker.responses.push(response);\r\n            }\r\n            else { // add worker for the route\r\n                value.workers.push(worker);\r\n            }\r\n        }\r\n    }\r\n\r\n    static saveQuery(className: string, methodName: string, query: QueryInfo) {\r\n        const value = swaggerRoutes.find(qry => qry.className === className);\r\n        const worker = getNewWorker(methodName);\r\n        worker.queries.push(query);\r\n        if (value == null) {\r\n            swaggerRoutes.push({\r\n                className: className,\r\n                workers: [worker]\r\n            })\r\n        }\r\n        else {\r\n            const savedWorker = value.workers.find(qry => qry.methodName === methodName);\r\n            if (savedWorker != null) { // add query for that worker\r\n                savedWorker.queries.push(query);\r\n            }\r\n            else { // add worker for the route\r\n                value.workers.push(worker);\r\n            }\r\n        }\r\n    }\r\n\r\n    static saveParam(className: string, methodName: string, query: QueryInfo) {\r\n        const value = swaggerRoutes.find(qry => qry.className === className);\r\n        const worker = getNewWorker(methodName);\r\n        worker.params.push(query);\r\n        if (value == null) {\r\n            swaggerRoutes.push({\r\n                className: className,\r\n                workers: [worker]\r\n            })\r\n        }\r\n        else {\r\n            const savedWorker = value.workers.find(qry => qry.methodName === methodName);\r\n            if (savedWorker != null) { // add query for that worker\r\n                savedWorker.params.push(query);\r\n            }\r\n            else { // add worker for the route\r\n                value.workers.push(worker);\r\n            }\r\n        }\r\n    }\r\n\r\n    static saveBody(className: string, methodName: string, body: BodyInfo) {\r\n        const value = swaggerRoutes.find(qry => qry.className === className);\r\n        const worker = getNewWorker(methodName);\r\n        worker.body = body as any;\r\n        if (value == null) {\r\n            swaggerRoutes.push({\r\n                className: className,\r\n                workers: [worker]\r\n            })\r\n        }\r\n        else {\r\n            const savedWorker = value.workers.find(qry => qry.methodName === methodName);\r\n            if (savedWorker != null) { // add query for that worker\r\n                savedWorker.body = body as any;\r\n            }\r\n            else { // add worker for the route\r\n                value.workers.push(worker);\r\n            }\r\n        }\r\n    }\r\n\r\n    static saveModel(model: SwaggerModelInfo) {\r\n        const value = swaggerModels.find(qry => qry.className === model.className);\r\n        if (value == null) {\r\n            swaggerModels.push(model);\r\n        }\r\n        else if (value.classInstance == null) {\r\n            value.classInstance = model.classInstance;\r\n        }\r\n    }\r\n\r\n    static addIgnoreProperty(className: string, propertyName: string) {\r\n        const value = swaggerModels.find(qry => qry.className === className);\r\n        if (value == null) {\r\n            swaggerModels.push({\r\n                classInstance: null,\r\n                className: className,\r\n                ignoredProperty: [propertyName]\r\n            });\r\n        }\r\n        else {\r\n            value.ignoredProperty.push(propertyName);\r\n        }\r\n    }\r\n\r\n    static get routes() {\r\n        return swaggerRoutes;\r\n    }\r\n\r\n    static get models() {\r\n        return swaggerModels;\r\n    }\r\n}","import { getDataType } from \"./get_data_type\";\r\nimport { DATA_TYPE } from \"../enums\";\r\nimport { SwaggerHandler } from \"../handlers/swagger_handler\";\r\nimport { SwaggerModelInfo } from \"../types/swagger_model_info\";\r\n\r\nexport const extractAndSaveModel = (value) => {\r\n    let className = \"\";\r\n    const type = getDataType(value);\r\n    const saveModelInfo = (modelValue) => {\r\n        const model = getModelinfo(modelValue);\r\n        if (model != null) {\r\n            SwaggerHandler.saveModel(model);\r\n            className = model.className;\r\n        }\r\n    }\r\n\r\n    if (type === DATA_TYPE.Function) {\r\n        saveModelInfo(value);\r\n    }\r\n    else if (type === DATA_TYPE.Array && value.length > 0) {\r\n        const firstValue = value[0];\r\n        if (getDataType(firstValue) === DATA_TYPE.Function) {\r\n            saveModelInfo(firstValue);\r\n        }\r\n    }\r\n    return className;\r\n}\r\n\r\nconst getModelinfo = (value) => {\r\n    try {\r\n        const model = new value();\r\n        return {\r\n            classInstance: model,\r\n            className: model.constructor.name,\r\n            ignoredProperty: []\r\n        } as SwaggerModelInfo;\r\n    }\r\n    catch (ex) {\r\n        console.log(\"getModelinfo\", ex);\r\n    }\r\n    return null;\r\n}","import { DATA_TYPE } from \"../enums\";\r\n\r\nexport const getDataType = (value) => {\r\n    const type = typeof value;\r\n    switch (type) {\r\n        case 'object':\r\n            if (Array.isArray(value)) {\r\n                return DATA_TYPE.Array;\r\n            }\r\n        default:\r\n            return type;\r\n    }\r\n}","import { extractAndSaveModel } from \"./extract_model\";\r\nimport { getDataType } from \"./get_data_type\";\r\nimport { DATA_TYPE } from \"..\";\r\nimport { SwaggerParamSchema } from \"../types/swagger_param_schema\";\r\nimport { SwaggerRef } from \"../types/swagger_ref\";\r\nimport { SwaggerCustomParam } from \"../types/swagger_custom_param\";\r\n\r\nexport const getParamSchema = (value) => {\r\n    const modelName = extractAndSaveModel(value);\r\n    const dataType = getDataType(value);\r\n    if (modelName.length > 0) { // value is model\r\n        const modelRefString = `#/models/${modelName}`;\r\n        const refValue: SwaggerRef = {\r\n            $ref: modelRefString\r\n        };\r\n        if (dataType === DATA_TYPE.Function) {\r\n            return refValue;\r\n        }\r\n        else {\r\n            return {\r\n                type: DATA_TYPE.Array,\r\n                items: refValue\r\n            } as SwaggerCustomParam;\r\n        }\r\n    }\r\n    else {\r\n        return {\r\n            type: dataType,\r\n            example: value\r\n        } as SwaggerCustomParam;\r\n    }\r\n}","export * from './models/index';\r\nexport * from './decorators/index';\r\nexport * from './enums/index'","export * from './swagger';","import { Router } from \"fortjs\";\r\nimport { Global } from \"../global\";\r\nimport { SwaggerHandler } from \"../handlers/swagger_handler\";\r\nimport { FileHelper } from \"../helpers/file_helper\";\r\nimport { ApplicationInfo } from \"../types/application_info\";\r\nimport { ServerInfo } from \"../types/server_info\";\r\nimport { SwaggerFormatter } from \"./swagger_formatter\";\r\n\r\n\r\nexport type SwaggerOption = {\r\n    extension: string;\r\n    srcFolder: string;\r\n    appInfo: ApplicationInfo;\r\n    servers: ServerInfo[];\r\n}\r\n\r\nexport class Swagger extends Router {\r\n    constructor() {\r\n        super();\r\n        // Global.routes = this.routes;\r\n    }\r\n    async create(option?: SwaggerOption) {\r\n        const formmatedData = new SwaggerFormatter().format(option, this.routes);\r\n        console.log(\"formmated data\", JSON.stringify(formmatedData));\r\n        // const extension = this.getExtension_(option.extension);\r\n        // if (extension == null) {\r\n        //     throw \"Invalid Files extension. Allowed extension are - ts, js.\"\r\n        // }\r\n        // const files = await FileHelper.getAllFilesFrom(option.srcFolder);\r\n        // if (files.length > 0) {\r\n        //     const filterFiles = FileHelper.filterFiles(files, option.extension);\r\n\r\n        // }\r\n        // else {\r\n        //     throw `No files found in directory - ${option.srcFolder}`;\r\n        // }\r\n        // console.log(\"routes\", JSON.stringify(SwaggerHandler.routes));\r\n        // console.log(\"models\", SwaggerHandler.models);\r\n        // const responses = [];\r\n        // SwaggerHandler.routes.forEach(value => {\r\n        //     value.workers.forEach(worker => {\r\n        //         responses.push(worker.responses);\r\n        //     })\r\n        // })\r\n        // console.log(\"responses\", responses)\r\n    }\r\n\r\n    private getExtension_(extension: string) {\r\n        switch (extension) {\r\n            case \".ts\":\r\n            case \"ts\":\r\n                return \".ts\";\r\n            case \".js\":\r\n            case \"js\":\r\n                return \".js\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n}","import { SwaggerHandler } from \"../handlers/swagger_handler\";\r\nimport { RouteInfo } from \"fortjs\";\r\nimport { DATA_TYPE } from \"../enums\";\r\nimport { extractAndSaveModel } from \"../helpers/extract_model\";\r\nimport { SwaggerParamSchema } from \"../types/swagger_param_schema\";\r\nimport { SwaggerRef } from \"../types/swagger_ref\";\r\nimport { SwaggerCustomParam } from \"../types/swagger_custom_param\";\r\nimport { getParamSchema } from \"../helpers/get_param_schema\";\r\nimport { BodyInfo } from \"../types/body_info\";\r\nimport { SwaggerOption } from \"./swagger\";\r\nimport { ApplicationInfo } from \"../types/application_info\";\r\nimport { ServerInfo } from \"../types/server_info\";\r\nimport { getDataType } from \"../helpers/get_data_type\";\r\n\r\nexport type SwaggerOutputPath = {\r\n    summary?: string;\r\n    operationId: string;\r\n    tags: string[];\r\n    parameters: SwaggerOutputParamInfo[],\r\n    responses: SwaggerOutputResponse\r\n}\r\n\r\nexport type SwaggerOutputResponse = {\r\n    description?: string;\r\n    content: { [mimeType: string]: SwaggerParamSchema }\r\n}\r\n\r\n\r\nexport type SwaggerOutputParamInfo = {\r\n    name: string;\r\n    in: SWAGGER_OUTPUT_PARAM,\r\n    description?: string;\r\n    required: boolean;\r\n    schema: SwaggerRef | SwaggerCustomParam\r\n}\r\n\r\n// export type SwaggerParamSchemaType = {\r\n//     type: DATA_TYPE;\r\n//     format: string;\r\n// }\r\n\r\nexport enum SWAGGER_OUTPUT_PARAM {\r\n    Query = \"query\",\r\n    Path = \"path\",\r\n    Body = \"body\"\r\n}\r\n\r\nexport type SwaggerStructure = {\r\n    openapi: string;\r\n    info: ApplicationInfo;\r\n    servers: ServerInfo[];\r\n    paths: any;\r\n    models: { [modelName: string]: SwaggerModelInfo }\r\n}\r\n\r\nexport type SwaggerModelInfo = {\r\n    required: string[];\r\n    properties: { [propName: string]: SwaggerCustomParam }\r\n}\r\n\r\nexport class SwaggerFormatter {\r\n    format(option: SwaggerOption, routes: RouteInfo[]) {\r\n        const swaggerJson: SwaggerStructure = {\r\n            openapi: \"3.0.0\",\r\n            info: option.appInfo,\r\n            servers: option.servers,\r\n            models: this.getModels_()\r\n        } as SwaggerStructure;\r\n        const swaggerPaths = {};\r\n        routes.forEach(route => {\r\n            const swaggerRouteData = SwaggerHandler.routes.find(qry => qry.className === route.controllerName);\r\n            if (swaggerRouteData != null) {\r\n                let pathName = route.path;\r\n                if (pathName[0] === \"/\") {\r\n                    pathName = route.path.substr(1)\r\n                }\r\n                const swaggerPath = {\r\n\r\n                }\r\n                route.workers.forEach(worker => {\r\n                    let pattern = worker.pattern;\r\n                    if (pattern[0] !== \"/\") {\r\n                        pattern = `/${pattern}`;\r\n                    }\r\n\r\n                    // add multiple route for all http method allowed for a single path \r\n                    worker.methodsAllowed.forEach(httpMethod => {\r\n                        swaggerPath[pattern] = {\r\n                            operationId: worker.workerName,\r\n                            parameters: this.getParams_(route.controllerName, worker.workerName),\r\n                            tags: [pathName],\r\n                            responses: this.getResponses_(route.controllerName, worker.workerName)\r\n                        } as SwaggerOutputPath\r\n                    })\r\n\r\n                });\r\n                swaggerPaths[`/${pathName}`] = swaggerPath;\r\n            }\r\n        });\r\n        swaggerJson.paths = swaggerPaths;\r\n        return swaggerJson;\r\n    }\r\n\r\n    private getModels_() {\r\n        const models = {\r\n\r\n        }\r\n        console.log('models', SwaggerHandler.models);\r\n        SwaggerHandler.models.forEach(model => {\r\n            const keys = Object.keys(model.classInstance);\r\n            // remove ignored prop\r\n            model.ignoredProperty.forEach(prop => {\r\n                const index = keys.indexOf(prop);\r\n                keys.splice(index, 1, prop);\r\n            })\r\n            const properties = {};\r\n            keys.forEach(key => {\r\n                const propValue = model[key];\r\n                const dataType = getDataType(propValue);\r\n                properties[key] = {\r\n                    type: dataType\r\n                } as SwaggerCustomParam;\r\n            });\r\n            models[model.className] = {\r\n                required: keys,\r\n                properties: properties\r\n            } as SwaggerModelInfo;\r\n        });\r\n        return models;\r\n    }\r\n\r\n    private getResponses_(className: string, methodName: string) {\r\n        const result: SwaggerOutputResponse = { content: {} };\r\n        const workerInfo = SwaggerHandler.routes.find(qry => qry.className === className).\r\n            workers.find(qry => qry.methodName === methodName);\r\n\r\n        workerInfo.responses.forEach(response => {\r\n            result.content[response.contentType] = {\r\n                schema: getParamSchema(response.value)\r\n            } as SwaggerParamSchema;\r\n        })\r\n        return result;\r\n    }\r\n\r\n    private getParams_(className: string, methodName: string) {\r\n        const params: SwaggerOutputParamInfo[] = [];\r\n        // const swaggerRouteInfo = \r\n        // if (swaggerRouteInfo != null) {\r\n        const workerInfo = SwaggerHandler.routes.find(qry => qry.className === className)\r\n            .workers.find(qry => qry.methodName === methodName);\r\n        if (workerInfo != null) {\r\n\r\n\r\n            // from route params\r\n            workerInfo.params.forEach(param => {\r\n                params.push({\r\n                    in: SWAGGER_OUTPUT_PARAM.Path,\r\n                    name: param.variableName,\r\n                    required: true,\r\n                    schema: getParamSchema(param.value)\r\n                })\r\n            });\r\n\r\n            // from query\r\n            workerInfo.queries.forEach(query => {\r\n                params.push({\r\n                    in: SWAGGER_OUTPUT_PARAM.Query,\r\n                    name: query.variableName,\r\n                    required: true,\r\n                    schema: getParamSchema(query.value)\r\n                })\r\n            });\r\n\r\n            // from body\r\n            const body = (workerInfo.body as BodyInfo);\r\n            if (body != null) {\r\n                params.push({\r\n                    in: SWAGGER_OUTPUT_PARAM.Body,\r\n                    name: body.variableName,\r\n                    required: true,\r\n                    schema: getParamSchema(body.value)\r\n                })\r\n            }\r\n        }\r\n        // }\r\n        return params;\r\n    }\r\n\r\n}","module.exports = require(\"fortjs\");"],"sourceRoot":""}